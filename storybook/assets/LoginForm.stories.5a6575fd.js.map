{"version":3,"file":"LoginForm.stories.5a6575fd.js","sources":["../../src/components/LoginForm/LoginForm.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Alert,\n  Box,\n  Button,\n  Grid,\n  IconButton,\n  InputAdornment,\n  TextField,\n} from '@mui/material';\nimport { useForm } from 'react-hook-form';\nimport { Visibility, VisibilityOff } from '@mui/icons-material';\nimport { ApiUserAccount } from 'apitypes';\nimport { useNavigate } from 'react-router-dom';\nimport UserAccountService from '../../services/user_accounts';\nimport FormHeading from '../FormHeading/FormHeading';\nimport styles from './LoginForm.module.scss';\n\nfunction LoginForm() {\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm();\n\n  const navigate = useNavigate();\n  const [showPassword, setShowPassword] = useState<Boolean>(false);\n  const [submitError, setSubmitError] = useState<string>('');\n\n  const onSubmit = (data: any) => {\n    const apiUser: ApiUserAccount = {\n      title: data.title,\n      firstname: data.firstname,\n      lastname: data.lastname,\n      email: data.email,\n      password: data.password,\n    };\n\n    UserAccountService.login(apiUser)\n      .then((res) => {\n        if (res.status === 200) {\n          setSubmitError('');\n          navigate('/app/dashboard');\n        } else if (res.status === 400) {\n          setSubmitError('Deine Anmeldedaten sind ungültig');\n        } else if (res.status === 500) {\n          setSubmitError('Verarbeitungsfehler auf dem Server');\n        } else {\n          setSubmitError(`Fehler bei der Verbindung zum Server: ${res.status}`);\n        }\n      })\n      .catch((error) => {\n        setSubmitError(`Fehler bei der Verbindung zum Server: ${error}`);\n      });\n  };\n\n  return (\n    <Box component=\"form\" onSubmit={handleSubmit(onSubmit)}>\n      <FormHeading>Log In</FormHeading>\n      <Grid container gap={2} justifyContent=\"center\" alignItems=\"center\" paddingX={3}>\n        <Grid item xs={12}>\n          <TextField\n            label=\"E-Mail*\"\n            fullWidth\n            {...register('email', {\n              required: 'Pflichtfeld',\n              pattern: {\n                value: /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n                message: 'Ungültige E-Mail Adresse',\n              },\n            })}\n            autoComplete=\"email\"\n            error={errors.email !== undefined}\n            helperText={errors.email?.message?.toString()}\n            data-testid=\"login_email\"\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <TextField\n            type={showPassword ? 'text' : 'password'}\n            fullWidth\n            {...register('password', {\n              required: 'Pflichtfeld',\n            })}\n            label=\"Passwort*\"\n            autoComplete=\"password\"\n            error={errors.password !== undefined}\n            helperText={errors.password?.message?.toString()}\n            InputProps={{\n              endAdornment:\n              (\n                <InputAdornment position=\"end\">\n                  <IconButton\n                    aria-label={showPassword ? 'Passwort verstecken' : 'Passwort zeigen'}\n                    onClick={() => setShowPassword(!showPassword)}\n                    onMouseDown={(e) => e.preventDefault()}\n                    edge=\"end\"\n                  >\n                    {showPassword ? <VisibilityOff /> : <Visibility />}\n                  </IconButton>\n                </InputAdornment>\n              ),\n            }}\n            data-testid=\"login_password\"\n          />\n        </Grid>\n        {submitError ? (\n          <Grid item xs={12} textAlign=\"center\">\n            <Alert severity=\"error\">\n              {submitError}\n            </Alert>\n          </Grid>\n        ) : ''}\n      </Grid>\n      <div className={styles.linkContainer}>\n        <Button sx={{ marginBottom: 1.5 }} type=\"submit\" variant=\"contained\" data-testid=\"login_submit\">\n          Einloggen\n        </Button>\n        <span>\n          Passwort vergessen?\n          <a href=\"/register\" className={styles.link}> Reset</a>\n        </span>\n        <span>\n          Neu hier?\n          <a href=\"/register\" className={styles.link}> Registrieren</a>\n        </span>\n      </div>\n    </Box>\n  );\n}\n\nexport default LoginForm;\n"],"names":["LoginForm","register","handleSubmit","formState","errors","useForm","navigate","useNavigate","showPassword","setShowPassword","useState","submitError","setSubmitError","Box","data","apiUser","title","firstname","lastname","email","password","UserAccountService","login","then","res","status","catch","error","_jsx","FormHeading","_jsxs","Grid","TextField","required","pattern","value","message","undefined","toString","endAdornment","InputAdornment","IconButton","e","preventDefault","VisibilityOff","Visibility","Alert","styles","linkContainer","Button","marginBottom","link"],"mappings":"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"}